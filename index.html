<!DOCTYPE HTML>
<html>

<head>
	<meta http-equic="Content-Type" content="text/html; charset=iso-8859-1">
	<title>Contact Form</title>
	
	<style>
		table, td {
    			border: 1px solid black;
		}
	</style>
</head>
	
<body>
	
	<script type="text/javascript">var submitted=false;</script>
    		<iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"     
			onload="if(submitted) {window.location='https://auto19.github.io/mysite/CommentForm.html';}"></iframe>
      	<form id="gform" action="https://script.google.com/macros/s/AKfycbyXCm7QLbS0jnCIlZt8kADwtXTf0ZYKpI7Bb5dr1tJoxscMj-0/exec" method="post" target="hidden_iframe" 
	      onsubmit="submitted=true;"> 
		<input type="text" name="Comment">
	</form>
	
	
	<button type="submit" form="gform" value="Submit">Submit</button>
	
	<table id="mahTable">
  		<tr>
    			<td>Comment</td>
  		</tr>
	</table>
	
	
	<script src='https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js'></script>
	<script type='text/javascript'>    
  		var publicSpreadsheetUrl = 'https://docs.google.com/spreadsheets/d/1XtYbT8exPI21tAtZWWDJwoNqC0-kbaIR00siPHt87Ow/edit?usp=sharing';
		var theComments = [
		 'first',
		 'sec'
		]; 
		
  		function init() {
    		Tabletop.init( { key: publicSpreadsheetUrl,
                     	callback: showInfo,
                     	simpleSheet: true } )
  		}

  		function showInfo(data, tabletop) {
    			//alert('Successfully processed!')
    			console.log(data);
			var names = data.map(function(data) {
  				return data['Comment'];
			});
			
			console.log(names);
			
			for(var i = 0; i < names.length; i++) {
				theComments.push(names[i]);
			}
			
			for(var i = 0; i < theComments.length; i++) {
				var table = document.getElementById("mahTable");
    				var row = table.insertRow(0);
    				var cell1 = row.insertCell(0);
    				cell1.innerHTML = theComments[i];
			}
			
			console.log(theComments);
  		}
		
		

  		window.addEventListener('DOMContentLoaded', init)
		
		
	</script>

</body>


</html>
